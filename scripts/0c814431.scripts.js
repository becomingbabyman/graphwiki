angular.module("ui.bootstrap",["ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});{c[0].offsetWidth}c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$parent.$watch(f,function(a){b.isOpen=!!a})),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){b.hasClass(e.activeClass)||a.$apply(function(){f.$setViewValue(a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){e();var c=+a.interval;!isNaN(c)&&c>=0&&(g=b(f,c))}function e(){g&&(b.cancel(g),g=null)}function f(){h?(a.next(),d()):a.pause()}var g,h,i=this,j=i.slides=[],k=-1;i.currentSlide=null;var l=!1;i.select=function(e,f){function g(){if(!l){if(i.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element){e.$element.addClass(f);{e.$element[0].offsetWidth}angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(e,i.currentSlide)}else h(e,i.currentSlide);i.currentSlide=e,k=m,d()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var m=j.indexOf(e);void 0===f&&(f=m>k?"next":"prev"),e&&e!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){l=!0}),i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.select=function(a){i.select(a)},a.isActive=function(a){return i.currentSlide===a},a.slides=function(){return j},a.$watch("interval",d),a.$on("$destroy",e),a.play=function(){h||(h=!0,d())},a.pause=function(){a.noPause||(h=!1,e())},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?i.select(b>=j.length?j[b-1]:j[b]):k>b&&k--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(a,b,c,d){function e(b,c){return angular.isDefined(b)?a.$parent.$eval(b):c}function f(a,b){return new Date(a,b,0).getDate()}function g(a,b){for(var c=new Array(b),d=a,e=0;b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a,b,d,e){return{date:a,label:c(a,b),selected:!!d,secondary:!!e}}var i={day:e(b.dayFormat,d.dayFormat),month:e(b.monthFormat,d.monthFormat),year:e(b.yearFormat,d.yearFormat),dayHeader:e(b.dayHeaderFormat,d.dayHeaderFormat),dayTitle:e(b.dayTitleFormat,d.dayTitleFormat),monthTitle:e(b.monthTitleFormat,d.monthTitleFormat)},j=e(b.startingDay,d.startingDay),k=e(b.yearRange,d.yearRange);this.minDate=d.minDate?new Date(d.minDate):null,this.maxDate=d.maxDate?new Date(d.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(a,b){var d=a.getFullYear(),e=a.getMonth(),k=new Date(d,e,1),l=j-k.getDay(),m=l>0?7-l:-l,n=new Date(k),o=0;m>0&&(n.setDate(-m+1),o+=m),o+=f(d,e+1),o+=(7-o%7)%7;for(var p=g(n,o),q=new Array(7),r=0;o>r;r++){var s=new Date(p[r]);p[r]=h(s,i.day,b&&b.getDate()===s.getDate()&&b.getMonth()===s.getMonth()&&b.getFullYear()===s.getFullYear(),s.getMonth()!==e)}for(var t=0;7>t;t++)q[t]=c(p[t].date,i.dayHeader);return{objects:p,title:c(a,i.dayTitle),labels:q}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(a,b){for(var d=new Array(12),e=a.getFullYear(),f=0;12>f;f++){var g=new Date(e,f,1);d[f]=h(g,i.month,b&&b.getMonth()===f&&b.getFullYear()===e)}return{objects:d,title:c(a,i.monthTitle)}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(a,b){for(var c=new Array(k),d=a.getFullYear(),e=parseInt((d-1)/k,10)*k+1,f=0;k>f;f++){var g=new Date(e+f,0,1);c[f]=h(g,i.year,b&&b.getFullYear()===g.getFullYear())}return{objects:c,title:[c[0].label,c[k-1].label].join(" - ")}},compare:function(a,b){return a.getFullYear()-b.getFullYear()},split:5,step:{years:k}}],this.isDisabled=function(b,c){var d=this.modes[c||0];return this.minDate&&d.compare(b,this.minDate)<0||this.maxDate&&d.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:d.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(a,b,c,d){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,e,f,g){function h(){a.showWeekNumbers=0===o&&q}function i(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}function j(b){var c=null,e=!0;n.$modelValue&&(c=new Date(n.$modelValue),isNaN(c)?(e=!1,d.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):b&&(p=c)),n.$setValidity("date",e);var f=m.modes[o],g=f.getVisibleDates(p,c);angular.forEach(g.objects,function(a){a.disabled=m.isDisabled(a.date,o)}),n.$setValidity("date-disabled",!c||!m.isDisabled(c)),a.rows=i(g.objects,f.split),a.labels=g.labels||[],a.title=g.title}function k(a){o=a,h(),j()}function l(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var m=g[0],n=g[1];if(n){var o=0,p=new Date,q=c.showWeeks;f.showWeeks?a.$parent.$watch(b(f.showWeeks),function(a){q=!!a,h()}):h(),f.min&&a.$parent.$watch(b(f.min),function(a){m.minDate=a?new Date(a):null,j()}),f.max&&a.$parent.$watch(b(f.max),function(a){m.maxDate=a?new Date(a):null,j()}),n.$render=function(){j(!0)},a.select=function(a){if(0===o){var b=n.$modelValue?new Date(n.$modelValue):new Date(0,0,0,0,0,0,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),n.$setViewValue(b),j(!0)}else p=a,k(o-1)},a.move=function(a){var b=m.modes[o].step;p.setMonth(p.getMonth()+a*(b.months||0)),p.setFullYear(p.getFullYear()+a*(b.years||0)),j()},a.toggleMode=function(){k((o+1)%m.modes.length)},a.getWeekNumber=function(b){return 0===o&&a.showWeekNumbers&&7===b.length?l(b[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",currentText:"Today",toggleWeeksText:"Weeks",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig","datepickerConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",link:function(h,i,j,k){function l(a){u?u(h,!!a):q.isOpen=!!a}function m(a){if(a){if(angular.isDate(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}function n(a,c,d){a&&(h.$watch(b(a),function(a){q[c]=a}),y.attr(d||c,c))}function o(){q.position=s?d.offset(i):d.position(i),q.position.top=q.position.top+i.prop("offsetHeight")}var p,q=h.$new(),r=angular.isDefined(j.closeOnDateSelection)?h.$eval(j.closeOnDateSelection):f.closeOnDateSelection,s=angular.isDefined(j.datepickerAppendToBody)?h.$eval(j.datepickerAppendToBody):f.appendToBody;j.$observe("datepickerPopup",function(a){p=a||f.dateFormat,k.$render()}),q.showButtonBar=angular.isDefined(j.showButtonBar)?h.$eval(j.showButtonBar):f.showButtonBar,h.$on("$destroy",function(){C.remove(),q.$destroy()}),j.$observe("currentText",function(a){q.currentText=angular.isDefined(a)?a:f.currentText}),j.$observe("toggleWeeksText",function(a){q.toggleWeeksText=angular.isDefined(a)?a:f.toggleWeeksText}),j.$observe("clearText",function(a){q.clearText=angular.isDefined(a)?a:f.clearText}),j.$observe("closeText",function(a){q.closeText=angular.isDefined(a)?a:f.closeText});var t,u;j.isOpen&&(t=b(j.isOpen),u=t.assign,h.$watch(t,function(a){q.isOpen=!!a})),q.isOpen=t?t(h):!1;var v=function(a){q.isOpen&&a.target!==i[0]&&q.$apply(function(){l(!1)})},w=function(){q.$apply(function(){l(!0)})},x=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");x.attr({"ng-model":"date","ng-change":"dateSelection()"});var y=angular.element(x.children()[0]),z={};j.datepickerOptions&&(z=h.$eval(j.datepickerOptions),y.attr(angular.extend({},z))),k.$parsers.unshift(m),q.dateSelection=function(a){angular.isDefined(a)&&(q.date=a),k.$setViewValue(q.date),k.$render(),r&&l(!1)},i.bind("input change keyup",function(){q.$apply(function(){q.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,p):"";i.val(a),q.date=k.$modelValue},n(j.min,"min"),n(j.max,"max"),j.showWeeks?n(j.showWeeks,"showWeeks","show-weeks"):(q.showWeeks="show-weeks"in z?z["show-weeks"]:g.showWeeks,y.attr("show-weeks","showWeeks")),j.dateDisabled&&y.attr("date-disabled",j.dateDisabled);var A=!1,B=!1;q.$watch("isOpen",function(a){a?(o(),c.bind("click",v),B&&i.unbind("focus",w),i[0].focus(),A=!0):(A&&c.unbind("click",v),i.bind("focus",w),B=!0),u&&u(h,a)}),q.today=function(){q.dateSelection(new Date)},q.clear=function(){q.dateSelection(null)};var C=a(x)(q);s?c.find("body").append(C):i.after(C)}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||e.hasClass("disabled")||e.prop("disabled")||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(c,d,e){c.windowClass=e.windowClass||"",b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,i),b.toggleClass(m,n.length()>0)}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&e.$apply(function(){o.dismiss(b.key)}))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr("window-class",b.windowClass),i.attr("index",n.length()-1),i.attr("animate","animate"),i.html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(a,b,c,d){var e=this,f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(d){b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){e.itemsPerPage=parseInt(b,10),a.totalPages=e.calculateTotalPages()}):this.itemsPerPage=d},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===a.totalPages},this.isActive=function(a){return this.page===a},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.getAttributeValue=function(b,c,e){return angular.isDefined(b)?e?d(b)(a.$parent):a.$parent.$eval(b):c},this.render=function(){this.page=parseInt(a.page,10)||1,this.page>0&&this.page<=a.totalPages&&(a.pages=this.getPages(this.page,a.totalPages))},a.selectPage=function(b){!e.isActive(b)&&b>0&&b<=a.totalPages&&(a.page=b,a.onSelectPage({page:b}))},a.$watch("page",function(){e.render()}),a.$watch("totalItems",function(){a.totalPages=e.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),e.page>b?a.selectPage(b):e.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var h,i=f.getAttributeValue(e.boundaryLinks,b.boundaryLinks),j=f.getAttributeValue(e.directionLinks,b.directionLinks),k=f.getAttributeValue(e.firstText,b.firstText,!0),l=f.getAttributeValue(e.previousText,b.previousText,!0),m=f.getAttributeValue(e.nextText,b.nextText,!0),n=f.getAttributeValue(e.lastText,b.lastText,!0),o=f.getAttributeValue(e.rotate,b.rotate);f.init(b.itemsPerPage),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){h=parseInt(a,10),f.render()}),f.getPages=function(a,b){var c=[],d=1,e=b,p=angular.isDefined(h)&&b>h;p&&(o?(d=Math.max(a-Math.floor(h/2),1),e=d+h-1,e>b&&(e=b,d=e-h+1)):(d=(Math.ceil(a/h)-1)*h+1,e=Math.min(d+h-1,b)));for(var q=d;e>=q;q++){var r=g(q,q,f.isActive(q),!1);c.push(r)}if(p&&!o){if(d>1){var s=g(d-1,"...",!1,!1);c.unshift(s)}if(b>e){var t=g(e+1,"...",!1,!1);c.push(t)}}if(j){var u=g(a-1,l,!1,f.noPrevious());c.unshift(u);var v=g(a+1,m,!1,f.noNext());c.push(v)}if(i){var w=g(1,k,!1,f.noPrevious());c.unshift(w);var x=g(b,n,!1,f.noNext());c.push(x)}return c}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){function f(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:i&&d,next:i&&e}}var g=e.getAttributeValue(d.previousText,a.previousText,!0),h=e.getAttributeValue(d.nextText,a.nextText,!0),i=e.getAttributeValue(d.align,a.align);e.init(a.itemsPerPage),e.getPages=function(a){return[f(a-1,g,e.noPrevious(),!0,!1),f(a+1,h,e.noNext(),!1,!0)]}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var a=f(s);return function(b,c,d){function f(){b.tt_isOpen?m():k()}function k(){(!z||b.$eval(d[l+"Enable"]))&&(b.tt_popupDelay?(v=g(p,b.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){b.$apply(function(){q()})}function p(){return b.tt_content?(r(),u&&g.cancel(u),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):c.after(t),A(),b.tt_isOpen=!0,b.$digest(),A):angular.noop}function q(){b.tt_isOpen=!1,g.cancel(v),b.tt_animation?u=g(s,500):s()}function r(){t&&s(),t=a(b,function(){}),b.$digest()}function s(){t&&(t.remove(),t=null)}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=!1,z=angular.isDefined(d[l+"Enable"]),A=function(){var a,d,e,f;switch(a=w?j.offset(c):j.position(c),d=t.prop("offsetWidth"),e=t.prop("offsetHeight"),b.tt_placement){case"right":f={top:a.top+a.height/2-e/2,left:a.left+a.width};break;case"bottom":f={top:a.top+a.height,left:a.left+a.width/2-d/2};break;case"left":f={top:a.top+a.height/2-e/2,left:a.left-d};break;default:f={top:a.top-e,left:a.left+a.width/2-d/2}}f.top+="px",f.left+="px",t.css(f)};b.tt_isOpen=!1,d.$observe(e,function(a){b.tt_content=a,!a&&b.tt_isOpen&&q()}),d.$observe(l+"Title",function(a){b.tt_title=a}),d.$observe(l+"Placement",function(a){b.tt_placement=angular.isDefined(a)?a:o.placement}),d.$observe(l+"PopupDelay",function(a){var c=parseInt(a,10);b.tt_popupDelay=isNaN(c)?o.popupDelay:c});var B=function(){y&&(c.unbind(x.show,k),c.unbind(x.hide,m))};d.$observe(l+"Trigger",function(a){B(),x=n(a),x.show===x.hide?c.bind(x.show,f):(c.bind(x.show,k),c.bind(x.hide,m)),y=!0});var C=b.$eval(d[l+"Animation"]);b.tt_animation=angular.isDefined(C)?!!C:o.animation,d.$observe(l+"AppendToBody",function(a){w=angular.isDefined(a)?h(a)(b):w}),w&&b.$on("$locationChangeSuccess",function(){b.tt_isOpen&&q()}),b.$on("$destroy",function(){g.cancel(u),g.cancel(v),B(),s()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig","$transition",function(a,b,c,d){var e=this,f=[],g=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,h=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.addBar=function(a,b){var c=0,d=a.$parent.$index;angular.isDefined(d)&&f[d]&&(c=f[d].value),f.push(a),this.update(b,a.value,c),a.$watch("value",function(a,c){a!==c&&e.update(b,a,c)}),a.$on("$destroy",function(){e.removeBar(a)})},this.update=function(a,b,c){var e=this.getPercentage(b);h?(a.css("width",this.getPercentage(c)+"%"),d(a,{width:e+"%"})):a.css({transition:"none",width:e+"%"})},this.removeBar=function(a){f.splice(f.indexOf(a),1)},this.getPercentage=function(a){return Math.round(100*a/g)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},template:'<div class="progress" ng-transclude></div>'}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","$parse","ratingConfig",function(a,b,c,d){this.maxRange=angular.isDefined(b.max)?a.$parent.$eval(b.max):d.max,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):d.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):d.stateOff,this.createRateObjects=function(a){for(var b={stateOn:this.stateOn,stateOff:this.stateOff},c=0,d=a.length;d>c;c++)a[c]=angular.extend({index:c},b,a[c]);return a},a.range=this.createRateObjects(angular.isDefined(b.ratingStates)?angular.copy(a.$parent.$eval(b.ratingStates)):new Array(this.maxRange)),a.rate=function(b){a.value===b||a.readonly||(a.value=b)},a.enter=function(b){a.readonly||(a.val=b),a.onHover({value:b})},a.reset=function(){a.val=angular.copy(a.value),a.onLeave()},a.$watch("value",function(b){a.val=b}),a.readonly=!1,b.readonly&&a.$parent.$watch(c(b.readonly),function(b){a.readonly=!!b})}]).directive("rating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),(1===c.length||a.active)&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1,a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"
}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a,c){a!==c&&(b.active=!!a)}),b.active=g(b.$parent)):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a?(f.select(b),b.onSelect()):b.onDeselect()}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).directive("timepicker",["$parse","$log","timepickerConfig","$locale",function(a,b,c,d){return{restrict:"EA",require:"?^ngModel",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,f,g,h){function i(){var a=parseInt(e.hours,10),b=e.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(e.showMeridian&&(12===a&&(a=0),e.meridian===q[1]&&(a+=12)),a):void 0}function j(){var a=parseInt(e.minutes,10);return a>=0&&60>a?a:void 0}function k(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function l(a){m(),h.$setViewValue(new Date(p)),n(a)}function m(){h.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function n(a){var b=p.getHours(),c=p.getMinutes();e.showMeridian&&(b=0===b||12===b?12:b%12),e.hours="h"===a?b:k(b),e.minutes="m"===a?c:k(c),e.meridian=p.getHours()<12?q[0]:q[1]}function o(a){var b=new Date(p.getTime()+6e4*a);p.setHours(b.getHours(),b.getMinutes()),l()}if(h){var p=new Date,q=angular.isDefined(g.meridians)?e.$parent.$eval(g.meridians):c.meridians||d.DATETIME_FORMATS.AMPMS,r=c.hourStep;g.hourStep&&e.$parent.$watch(a(g.hourStep),function(a){r=parseInt(a,10)});var s=c.minuteStep;g.minuteStep&&e.$parent.$watch(a(g.minuteStep),function(a){s=parseInt(a,10)}),e.showMeridian=c.showMeridian,g.showMeridian&&e.$parent.$watch(a(g.showMeridian),function(a){if(e.showMeridian=!!a,h.$error.time){var b=i(),c=j();angular.isDefined(b)&&angular.isDefined(c)&&(p.setHours(b),l())}else n()});var t=f.find("input"),u=t.eq(0),v=t.eq(1),w=angular.isDefined(g.mousewheel)?e.$eval(g.mousewheel):c.mousewheel;if(w){var x=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};u.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementHours():e.decrementHours()),a.preventDefault()}),v.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementMinutes():e.decrementMinutes()),a.preventDefault()})}if(e.readonlyInput=angular.isDefined(g.readonlyInput)?e.$eval(g.readonlyInput):c.readonlyInput,e.readonlyInput)e.updateHours=angular.noop,e.updateMinutes=angular.noop;else{var y=function(a,b){h.$setViewValue(null),h.$setValidity("time",!1),angular.isDefined(a)&&(e.invalidHours=a),angular.isDefined(b)&&(e.invalidMinutes=b)};e.updateHours=function(){var a=i();angular.isDefined(a)?(p.setHours(a),l("h")):y(!0)},u.bind("blur",function(){!e.validHours&&e.hours<10&&e.$apply(function(){e.hours=k(e.hours)})}),e.updateMinutes=function(){var a=j();angular.isDefined(a)?(p.setMinutes(a),l("m")):y(void 0,!0)},v.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=k(e.minutes)})})}h.$render=function(){var a=h.$modelValue?new Date(h.$modelValue):null;isNaN(a)?(h.$setValidity("time",!1),b.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(p=a),m(),n())},e.incrementHours=function(){o(60*r)},e.decrementHours=function(){o(60*-r)},e.incrementMinutes=function(){o(s)},e.decrementMinutes=function(){o(-s)},e.toggleMeridian=function(){o(720*(p.getHours()<12?1:-1))}}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?b(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=angular.element("<div typeahead-popup></div>");w.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&w.attr("template-url",k.typeaheadTemplateUrl);var x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y=function(){x.matches=[],x.activeIdx=-1},z=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){if(a===l.$viewValue&&m){if(c.length>0){x.activeIdx=0,x.matches.length=0;for(var d=0;d<c.length;d++)b[v.itemName]=c[d],x.matches.push({label:v.viewMapper(x,b),model:c[d]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight")}else y();q(i,!1)}},function(){y(),q(i,!1)})};y(),x.query=void 0;var A;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(A&&d.cancel(A),A=d(function(){z(a)},o)):z(a):(q(i,!1),y()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,d={};d[v.itemName]=c=x.matches[a].model,b=v.modelMapper(i,d),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,d)}),y(),j[0].focus()},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),y(),x.$digest()))}),j.bind("blur",function(){m=!1});var B=function(a){j[0]!==a.target&&(y(),x.$digest())};e.bind("click",B),i.$on("$destroy",function(){e.unbind("click",B)});var C=a(w)(x);t?e.find("body").append(C):j.after(C)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/popup.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});{c[0].offsetWidth}c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$parent.$watch(f,function(a){b.isOpen=!!a})),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){b.hasClass(e.activeClass)||a.$apply(function(){f.$setViewValue(a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){e();var c=+a.interval;!isNaN(c)&&c>=0&&(g=b(f,c))}function e(){g&&(b.cancel(g),g=null)}function f(){h?(a.next(),d()):a.pause()}var g,h,i=this,j=i.slides=[],k=-1;i.currentSlide=null;var l=!1;i.select=function(e,f){function g(){if(!l){if(i.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element){e.$element.addClass(f);{e.$element[0].offsetWidth}angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(e,i.currentSlide)}else h(e,i.currentSlide);i.currentSlide=e,k=m,d()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var m=j.indexOf(e);void 0===f&&(f=m>k?"next":"prev"),e&&e!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){l=!0}),i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.select=function(a){i.select(a)},a.isActive=function(a){return i.currentSlide===a},a.slides=function(){return j},a.$watch("interval",d),a.$on("$destroy",e),a.play=function(){h||(h=!0,d())},a.pause=function(){a.noPause||(h=!1,e())},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?i.select(b>=j.length?j[b-1]:j[b]):k>b&&k--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(a,b,c,d){function e(b,c){return angular.isDefined(b)?a.$parent.$eval(b):c}function f(a,b){return new Date(a,b,0).getDate()}function g(a,b){for(var c=new Array(b),d=a,e=0;b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a,b,d,e){return{date:a,label:c(a,b),selected:!!d,secondary:!!e}}var i={day:e(b.dayFormat,d.dayFormat),month:e(b.monthFormat,d.monthFormat),year:e(b.yearFormat,d.yearFormat),dayHeader:e(b.dayHeaderFormat,d.dayHeaderFormat),dayTitle:e(b.dayTitleFormat,d.dayTitleFormat),monthTitle:e(b.monthTitleFormat,d.monthTitleFormat)},j=e(b.startingDay,d.startingDay),k=e(b.yearRange,d.yearRange);this.minDate=d.minDate?new Date(d.minDate):null,this.maxDate=d.maxDate?new Date(d.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(a,b){var d=a.getFullYear(),e=a.getMonth(),k=new Date(d,e,1),l=j-k.getDay(),m=l>0?7-l:-l,n=new Date(k),o=0;m>0&&(n.setDate(-m+1),o+=m),o+=f(d,e+1),o+=(7-o%7)%7;for(var p=g(n,o),q=new Array(7),r=0;o>r;r++){var s=new Date(p[r]);p[r]=h(s,i.day,b&&b.getDate()===s.getDate()&&b.getMonth()===s.getMonth()&&b.getFullYear()===s.getFullYear(),s.getMonth()!==e)}for(var t=0;7>t;t++)q[t]=c(p[t].date,i.dayHeader);return{objects:p,title:c(a,i.dayTitle),labels:q}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(a,b){for(var d=new Array(12),e=a.getFullYear(),f=0;12>f;f++){var g=new Date(e,f,1);d[f]=h(g,i.month,b&&b.getMonth()===f&&b.getFullYear()===e)}return{objects:d,title:c(a,i.monthTitle)}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(a,b){for(var c=new Array(k),d=a.getFullYear(),e=parseInt((d-1)/k,10)*k+1,f=0;k>f;f++){var g=new Date(e+f,0,1);c[f]=h(g,i.year,b&&b.getFullYear()===g.getFullYear())}return{objects:c,title:[c[0].label,c[k-1].label].join(" - ")}},compare:function(a,b){return a.getFullYear()-b.getFullYear()},split:5,step:{years:k}}],this.isDisabled=function(b,c){var d=this.modes[c||0];return this.minDate&&d.compare(b,this.minDate)<0||this.maxDate&&d.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:d.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(a,b,c,d){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,e,f,g){function h(){a.showWeekNumbers=0===o&&q}function i(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}function j(b){var c=null,e=!0;n.$modelValue&&(c=new Date(n.$modelValue),isNaN(c)?(e=!1,d.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):b&&(p=c)),n.$setValidity("date",e);var f=m.modes[o],g=f.getVisibleDates(p,c);angular.forEach(g.objects,function(a){a.disabled=m.isDisabled(a.date,o)}),n.$setValidity("date-disabled",!c||!m.isDisabled(c)),a.rows=i(g.objects,f.split),a.labels=g.labels||[],a.title=g.title}function k(a){o=a,h(),j()}function l(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var m=g[0],n=g[1];if(n){var o=0,p=new Date,q=c.showWeeks;f.showWeeks?a.$parent.$watch(b(f.showWeeks),function(a){q=!!a,h()}):h(),f.min&&a.$parent.$watch(b(f.min),function(a){m.minDate=a?new Date(a):null,j()}),f.max&&a.$parent.$watch(b(f.max),function(a){m.maxDate=a?new Date(a):null,j()}),n.$render=function(){j(!0)},a.select=function(a){if(0===o){var b=n.$modelValue?new Date(n.$modelValue):new Date(0,0,0,0,0,0,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),n.$setViewValue(b),j(!0)}else p=a,k(o-1)},a.move=function(a){var b=m.modes[o].step;p.setMonth(p.getMonth()+a*(b.months||0)),p.setFullYear(p.getFullYear()+a*(b.years||0)),j()},a.toggleMode=function(){k((o+1)%m.modes.length)},a.getWeekNumber=function(b){return 0===o&&a.showWeekNumbers&&7===b.length?l(b[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",currentText:"Today",toggleWeeksText:"Weeks",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig","datepickerConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",link:function(h,i,j,k){function l(a){u?u(h,!!a):q.isOpen=!!a}function m(a){if(a){if(angular.isDate(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}function n(a,c,d){a&&(h.$watch(b(a),function(a){q[c]=a}),y.attr(d||c,c))}function o(){q.position=s?d.offset(i):d.position(i),q.position.top=q.position.top+i.prop("offsetHeight")}var p,q=h.$new(),r=angular.isDefined(j.closeOnDateSelection)?h.$eval(j.closeOnDateSelection):f.closeOnDateSelection,s=angular.isDefined(j.datepickerAppendToBody)?h.$eval(j.datepickerAppendToBody):f.appendToBody;j.$observe("datepickerPopup",function(a){p=a||f.dateFormat,k.$render()}),q.showButtonBar=angular.isDefined(j.showButtonBar)?h.$eval(j.showButtonBar):f.showButtonBar,h.$on("$destroy",function(){C.remove(),q.$destroy()}),j.$observe("currentText",function(a){q.currentText=angular.isDefined(a)?a:f.currentText}),j.$observe("toggleWeeksText",function(a){q.toggleWeeksText=angular.isDefined(a)?a:f.toggleWeeksText}),j.$observe("clearText",function(a){q.clearText=angular.isDefined(a)?a:f.clearText}),j.$observe("closeText",function(a){q.closeText=angular.isDefined(a)?a:f.closeText});var t,u;j.isOpen&&(t=b(j.isOpen),u=t.assign,h.$watch(t,function(a){q.isOpen=!!a})),q.isOpen=t?t(h):!1;var v=function(a){q.isOpen&&a.target!==i[0]&&q.$apply(function(){l(!1)})},w=function(){q.$apply(function(){l(!0)})},x=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");x.attr({"ng-model":"date","ng-change":"dateSelection()"});var y=angular.element(x.children()[0]),z={};j.datepickerOptions&&(z=h.$eval(j.datepickerOptions),y.attr(angular.extend({},z))),k.$parsers.unshift(m),q.dateSelection=function(a){angular.isDefined(a)&&(q.date=a),k.$setViewValue(q.date),k.$render(),r&&l(!1)},i.bind("input change keyup",function(){q.$apply(function(){q.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,p):"";i.val(a),q.date=k.$modelValue},n(j.min,"min"),n(j.max,"max"),j.showWeeks?n(j.showWeeks,"showWeeks","show-weeks"):(q.showWeeks="show-weeks"in z?z["show-weeks"]:g.showWeeks,y.attr("show-weeks","showWeeks")),j.dateDisabled&&y.attr("date-disabled",j.dateDisabled);var A=!1,B=!1;q.$watch("isOpen",function(a){a?(o(),c.bind("click",v),B&&i.unbind("focus",w),i[0].focus(),A=!0):(A&&c.unbind("click",v),i.bind("focus",w),B=!0),u&&u(h,a)}),q.today=function(){q.dateSelection(new Date)},q.clear=function(){q.dateSelection(null)};var C=a(x)(q);s?c.find("body").append(C):i.after(C)}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||e.hasClass("disabled")||e.prop("disabled")||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(c,d,e){c.windowClass=e.windowClass||"",b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,i),b.toggleClass(m,n.length()>0)}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&e.$apply(function(){o.dismiss(b.key)}))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr("window-class",b.windowClass),i.attr("index",n.length()-1),i.attr("animate","animate"),i.html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(a,b,c,d){var e=this,f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(d){b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){e.itemsPerPage=parseInt(b,10),a.totalPages=e.calculateTotalPages()}):this.itemsPerPage=d},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===a.totalPages},this.isActive=function(a){return this.page===a},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.getAttributeValue=function(b,c,e){return angular.isDefined(b)?e?d(b)(a.$parent):a.$parent.$eval(b):c},this.render=function(){this.page=parseInt(a.page,10)||1,this.page>0&&this.page<=a.totalPages&&(a.pages=this.getPages(this.page,a.totalPages))
},a.selectPage=function(b){!e.isActive(b)&&b>0&&b<=a.totalPages&&(a.page=b,a.onSelectPage({page:b}))},a.$watch("page",function(){e.render()}),a.$watch("totalItems",function(){a.totalPages=e.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),e.page>b?a.selectPage(b):e.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var h,i=f.getAttributeValue(e.boundaryLinks,b.boundaryLinks),j=f.getAttributeValue(e.directionLinks,b.directionLinks),k=f.getAttributeValue(e.firstText,b.firstText,!0),l=f.getAttributeValue(e.previousText,b.previousText,!0),m=f.getAttributeValue(e.nextText,b.nextText,!0),n=f.getAttributeValue(e.lastText,b.lastText,!0),o=f.getAttributeValue(e.rotate,b.rotate);f.init(b.itemsPerPage),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){h=parseInt(a,10),f.render()}),f.getPages=function(a,b){var c=[],d=1,e=b,p=angular.isDefined(h)&&b>h;p&&(o?(d=Math.max(a-Math.floor(h/2),1),e=d+h-1,e>b&&(e=b,d=e-h+1)):(d=(Math.ceil(a/h)-1)*h+1,e=Math.min(d+h-1,b)));for(var q=d;e>=q;q++){var r=g(q,q,f.isActive(q),!1);c.push(r)}if(p&&!o){if(d>1){var s=g(d-1,"...",!1,!1);c.unshift(s)}if(b>e){var t=g(e+1,"...",!1,!1);c.push(t)}}if(j){var u=g(a-1,l,!1,f.noPrevious());c.unshift(u);var v=g(a+1,m,!1,f.noNext());c.push(v)}if(i){var w=g(1,k,!1,f.noPrevious());c.unshift(w);var x=g(b,n,!1,f.noNext());c.push(x)}return c}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){function f(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:i&&d,next:i&&e}}var g=e.getAttributeValue(d.previousText,a.previousText,!0),h=e.getAttributeValue(d.nextText,a.nextText,!0),i=e.getAttributeValue(d.align,a.align);e.init(a.itemsPerPage),e.getPages=function(a){return[f(a-1,g,e.noPrevious(),!0,!1),f(a+1,h,e.noNext(),!1,!0)]}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var a=f(s);return function(b,c,d){function f(){b.tt_isOpen?m():k()}function k(){(!z||b.$eval(d[l+"Enable"]))&&(b.tt_popupDelay?(v=g(p,b.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){b.$apply(function(){q()})}function p(){return b.tt_content?(r(),u&&g.cancel(u),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):c.after(t),A(),b.tt_isOpen=!0,b.$digest(),A):angular.noop}function q(){b.tt_isOpen=!1,g.cancel(v),b.tt_animation?u=g(s,500):s()}function r(){t&&s(),t=a(b,function(){}),b.$digest()}function s(){t&&(t.remove(),t=null)}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=!1,z=angular.isDefined(d[l+"Enable"]),A=function(){var a,d,e,f;switch(a=w?j.offset(c):j.position(c),d=t.prop("offsetWidth"),e=t.prop("offsetHeight"),b.tt_placement){case"right":f={top:a.top+a.height/2-e/2,left:a.left+a.width};break;case"bottom":f={top:a.top+a.height,left:a.left+a.width/2-d/2};break;case"left":f={top:a.top+a.height/2-e/2,left:a.left-d};break;default:f={top:a.top-e,left:a.left+a.width/2-d/2}}f.top+="px",f.left+="px",t.css(f)};b.tt_isOpen=!1,d.$observe(e,function(a){b.tt_content=a,!a&&b.tt_isOpen&&q()}),d.$observe(l+"Title",function(a){b.tt_title=a}),d.$observe(l+"Placement",function(a){b.tt_placement=angular.isDefined(a)?a:o.placement}),d.$observe(l+"PopupDelay",function(a){var c=parseInt(a,10);b.tt_popupDelay=isNaN(c)?o.popupDelay:c});var B=function(){y&&(c.unbind(x.show,k),c.unbind(x.hide,m))};d.$observe(l+"Trigger",function(a){B(),x=n(a),x.show===x.hide?c.bind(x.show,f):(c.bind(x.show,k),c.bind(x.hide,m)),y=!0});var C=b.$eval(d[l+"Animation"]);b.tt_animation=angular.isDefined(C)?!!C:o.animation,d.$observe(l+"AppendToBody",function(a){w=angular.isDefined(a)?h(a)(b):w}),w&&b.$on("$locationChangeSuccess",function(){b.tt_isOpen&&q()}),b.$on("$destroy",function(){g.cancel(u),g.cancel(v),B(),s()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig","$transition",function(a,b,c,d){var e=this,f=[],g=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,h=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.addBar=function(a,b){var c=0,d=a.$parent.$index;angular.isDefined(d)&&f[d]&&(c=f[d].value),f.push(a),this.update(b,a.value,c),a.$watch("value",function(a,c){a!==c&&e.update(b,a,c)}),a.$on("$destroy",function(){e.removeBar(a)})},this.update=function(a,b,c){var e=this.getPercentage(b);h?(a.css("width",this.getPercentage(c)+"%"),d(a,{width:e+"%"})):a.css({transition:"none",width:e+"%"})},this.removeBar=function(a){f.splice(f.indexOf(a),1)},this.getPercentage=function(a){return Math.round(100*a/g)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},template:'<div class="progress" ng-transclude></div>'}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","$parse","ratingConfig",function(a,b,c,d){this.maxRange=angular.isDefined(b.max)?a.$parent.$eval(b.max):d.max,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):d.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):d.stateOff,this.createRateObjects=function(a){for(var b={stateOn:this.stateOn,stateOff:this.stateOff},c=0,d=a.length;d>c;c++)a[c]=angular.extend({index:c},b,a[c]);return a},a.range=this.createRateObjects(angular.isDefined(b.ratingStates)?angular.copy(a.$parent.$eval(b.ratingStates)):new Array(this.maxRange)),a.rate=function(b){a.value===b||a.readonly||(a.value=b)},a.enter=function(b){a.readonly||(a.val=b),a.onHover({value:b})},a.reset=function(){a.val=angular.copy(a.value),a.onLeave()},a.$watch("value",function(b){a.val=b}),a.readonly=!1,b.readonly&&a.$parent.$watch(c(b.readonly),function(b){a.readonly=!!b})}]).directive("rating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),(1===c.length||a.active)&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1,a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a,c){a!==c&&(b.active=!!a)}),b.active=g(b.$parent)):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a?(f.select(b),b.onSelect()):b.onDeselect()}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).directive("timepicker",["$parse","$log","timepickerConfig","$locale",function(a,b,c,d){return{restrict:"EA",require:"?^ngModel",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,f,g,h){function i(){var a=parseInt(e.hours,10),b=e.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(e.showMeridian&&(12===a&&(a=0),e.meridian===q[1]&&(a+=12)),a):void 0}function j(){var a=parseInt(e.minutes,10);return a>=0&&60>a?a:void 0}function k(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function l(a){m(),h.$setViewValue(new Date(p)),n(a)}function m(){h.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function n(a){var b=p.getHours(),c=p.getMinutes();e.showMeridian&&(b=0===b||12===b?12:b%12),e.hours="h"===a?b:k(b),e.minutes="m"===a?c:k(c),e.meridian=p.getHours()<12?q[0]:q[1]}function o(a){var b=new Date(p.getTime()+6e4*a);p.setHours(b.getHours(),b.getMinutes()),l()}if(h){var p=new Date,q=angular.isDefined(g.meridians)?e.$parent.$eval(g.meridians):c.meridians||d.DATETIME_FORMATS.AMPMS,r=c.hourStep;g.hourStep&&e.$parent.$watch(a(g.hourStep),function(a){r=parseInt(a,10)});var s=c.minuteStep;g.minuteStep&&e.$parent.$watch(a(g.minuteStep),function(a){s=parseInt(a,10)}),e.showMeridian=c.showMeridian,g.showMeridian&&e.$parent.$watch(a(g.showMeridian),function(a){if(e.showMeridian=!!a,h.$error.time){var b=i(),c=j();angular.isDefined(b)&&angular.isDefined(c)&&(p.setHours(b),l())}else n()});var t=f.find("input"),u=t.eq(0),v=t.eq(1),w=angular.isDefined(g.mousewheel)?e.$eval(g.mousewheel):c.mousewheel;if(w){var x=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};u.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementHours():e.decrementHours()),a.preventDefault()}),v.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementMinutes():e.decrementMinutes()),a.preventDefault()})}if(e.readonlyInput=angular.isDefined(g.readonlyInput)?e.$eval(g.readonlyInput):c.readonlyInput,e.readonlyInput)e.updateHours=angular.noop,e.updateMinutes=angular.noop;else{var y=function(a,b){h.$setViewValue(null),h.$setValidity("time",!1),angular.isDefined(a)&&(e.invalidHours=a),angular.isDefined(b)&&(e.invalidMinutes=b)};e.updateHours=function(){var a=i();angular.isDefined(a)?(p.setHours(a),l("h")):y(!0)},u.bind("blur",function(){!e.validHours&&e.hours<10&&e.$apply(function(){e.hours=k(e.hours)})}),e.updateMinutes=function(){var a=j();angular.isDefined(a)?(p.setMinutes(a),l("m")):y(void 0,!0)},v.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=k(e.minutes)})})}h.$render=function(){var a=h.$modelValue?new Date(h.$modelValue):null;isNaN(a)?(h.$setValidity("time",!1),b.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(p=a),m(),n())},e.incrementHours=function(){o(60*r)},e.decrementHours=function(){o(60*-r)},e.incrementMinutes=function(){o(s)},e.decrementMinutes=function(){o(-s)},e.toggleMeridian=function(){o(720*(p.getHours()<12?1:-1))}}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?b(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=angular.element("<div typeahead-popup></div>");w.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&w.attr("template-url",k.typeaheadTemplateUrl);var x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y=function(){x.matches=[],x.activeIdx=-1},z=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){if(a===l.$viewValue&&m){if(c.length>0){x.activeIdx=0,x.matches.length=0;for(var d=0;d<c.length;d++)b[v.itemName]=c[d],x.matches.push({label:v.viewMapper(x,b),model:c[d]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight")}else y();q(i,!1)}},function(){y(),q(i,!1)})};y(),x.query=void 0;var A;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(A&&d.cancel(A),A=d(function(){z(a)},o)):z(a):(q(i,!1),y()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,d={};d[v.itemName]=c=x.matches[a].model,b=v.modelMapper(i,d),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,d)}),y(),j[0].focus()},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),y(),x.$digest()))}),j.bind("blur",function(){m=!1});var B=function(a){j[0]!==a.target&&(y(),x.$digest())};e.bind("click",B),i.$on("$destroy",function(){e.unbind("click",B)});var C=a(w)(x);t?e.find("body").append(C):j.after(C)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html","<div class='alert' ng-class='\"alert-\" + (type || \"warning\")'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides().length > 1"><span class="icon-prev"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides().length > 1"><span class="icon-next"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<table>\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-default btn-sm btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr ng-show="labels.length > 0" class="h6">\n      <th ng-show="showWeekNumbers" class="text-center">#</th>\n      <th ng-repeat="label in labels" class="text-center">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{\'text-muted\': dt.secondary}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\">\n	<li ng-transclude></li>\n"+'	<li ng-show="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group">\n			<button type="button" class="btn btn-sm btn-info" ng-click="today()">{{currentText}}</button>\n			<button type="button" class="btn btn-sm btn-default" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">{{toggleWeeksText}}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="clear()">{{clearText}}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="isOpen = false">{{closeText}}</button>\n	</li>\n</ul>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress"><div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n    <i ng-repeat="r in range" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < val && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')"></i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div class="tabbable">\n  <ul class="nav {{type && \'nav-\' + type}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: isOpen()&&'block' || 'none', top: position.top+'px', left: position.left+'px'}\">\n"+'    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]),function($){var trace=function(msg){if("undefined"!=typeof window&&window.console){for(var len=arguments.length,args=[],i=0;len>i;i++)args.push("arguments["+i+"]");eval("console.log("+args.join(",")+")")}},dirname=function(a){var b=a.replace(/^\/?(.*?)\/?$/,"$1").split("/");return b.pop(),"/"+b.join("/")},basename=function(a){var b=a.replace(/^\/?(.*?)\/?$/,"$1").split("/"),c=b.pop();return""==c?null:c},_ordinalize_re=/(\d)(?=(\d\d\d)+(?!\d))/g,ordinalize=function(a){var b=""+a;return 11e3>a?b=(""+a).replace(_ordinalize_re,"$1,"):1e6>a?b=Math.floor(a/1e3)+"k":1e9>a&&(b=(""+Math.floor(a/1e3)).replace(_ordinalize_re,"$1,")+"m"),b},nano=function(a,b){return a.replace(/\{([\w\-\.]*)}/g,function(a,c){var d=c.split("."),e=b[d.shift()];return $.each(d,function(){e=e.hasOwnProperty(this)?e[this]:a}),e})},objcopy=function(a){if(void 0===a)return void 0;if(null===a)return null;if(a.parentNode)return a;switch(typeof a){case"string":return a.substring(0);case"number":return a+0;case"boolean":return a===!0}var b=$.isArray(a)?[]:{};return $.each(a,function(a,c){b[a]=objcopy(c)}),b},objmerge=function(a,b){a=a||{},b=b||{};var c=objcopy(a);for(var d in b)c[d]=b[d];return c},objcmp=function(a,b,c){if(!a||!b)return a===b;if(typeof a!=typeof b)return!1;if("object"!=typeof a)return a===b;if($.isArray(a)){if(!$.isArray(b))return!1;if(a.length!=b.length)return!1}else{var d=[];for(var e in a)a.hasOwnProperty(e)&&d.push(e);var f=[];for(var e in b)b.hasOwnProperty(e)&&f.push(e);if(c||(d.sort(),f.sort()),d.join(",")!==f.join(","))return!1}var g=!0;return $.each(a,function(c){var d=objcmp(a[c],b[c]);return g=g&&d,g?void 0:!1}),g},objkeys=function(a){var b=[];return $.each(a,function(c){a.hasOwnProperty(c)&&b.push(c)}),b},objcontains=function(a){if(!a||"object"!=typeof a)return!1;for(var b=1,c=arguments.length;c>b;b++)if(a.hasOwnProperty(arguments[b]))return!0;return!1},uniq=function(a){for(var b=a.length,c={},d=0;b>d;d++)c[a[d]]=!0;return objkeys(c)},arbor_path=function(){var a=$("script").map(function(){var a=$(this).attr("src");if(a)return a.match(/arbor[^\/\.]*.js|dev.js/)?a.match(/.*\//)||"/":void 0});return a.length>0?a[0]:null},Kernel=function(a){var b="file:"==window.location.protocol&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1,c=void 0!==window.Worker&&!b,d=null,e=null,f=[];f.last=new Date;var g=null,h=null,i=null,j=null,k=!1,l={system:a,tween:null,nodes:{},init:function(){e="undefined"!=typeof Tween?Tween():"undefined"!=typeof arbor.Tween?arbor.Tween():{busy:function(){return!1},tick:function(){return!0},to:function(){trace("Please include arbor-tween.js to enable tweens"),e.to=function(){}}},l.tween=e;var b=a.parameters();return c?(trace("arbor.js/web-workers",b),g=setInterval(l.screenUpdate,b.timeout),d=new Worker(arbor_path()+"arbor.js"),d.onmessage=l.workerMsg,d.onerror=function(a){trace("physics:",a)
},d.postMessage({type:"physics",physics:objmerge(b,{timeout:Math.ceil(b.timeout)})})):(trace("arbor.js/single-threaded",b),d=Physics(b.dt,b.stiffness,b.repulsion,b.friction,l.system._updateGeometry,b.integrator),l.start()),l},graphChanged:function(a){c?d.postMessage({type:"changes",changes:a}):d._update(a),l.start()},particleModified:function(a,b){c?d.postMessage({type:"modify",id:a,mods:b}):d.modifyNode(a,b),l.start()},physicsModified:function(a){isNaN(a.timeout)||(c?(clearInterval(g),g=setInterval(l.screenUpdate,a.timeout)):(clearInterval(i),i=null)),c?d.postMessage({type:"sys",param:a}):d.modifyPhysics(a),l.start()},workerMsg:function(a){var b=a.data.type;"geometry"==b?l.workerUpdate(a.data):trace("physics:",a.data)},_lastPositions:null,workerUpdate:function(a){l._lastPositions=a,l._lastBounds=a.bounds},_lastFrametime:(new Date).valueOf(),_lastBounds:null,_currentRenderer:null,screenUpdate:function(){var a=((new Date).valueOf(),!1);if(null!==l._lastPositions&&(l.system._updateGeometry(l._lastPositions),l._lastPositions=null,a=!0),e&&e.busy()&&(a=!0),l.system._updateBounds(l._lastBounds)&&(a=!0),a){var b=l.system.renderer;if(void 0!==b){b!==h&&(b.init(l.system),h=b),e&&e.tick(),b.redraw();var c=f.last;f.last=new Date,f.push(f.last-c),f.length>50&&f.shift()}}},physicsUpdate:function(){e&&e.tick(),d.tick();var a=l.system._updateBounds();e&&e.busy()&&(a=!0);var b=l.system.renderer,c=new Date,b=l.system.renderer;void 0!==b&&(b!==h&&(b.init(l.system),h=b),b.redraw({timestamp:c}));var g=f.last;f.last=c,f.push(f.last-g),f.length>50&&f.shift();var k=d.systemEnergy();(k.mean+k.max)/2<.05?(null===j&&(j=(new Date).valueOf()),(new Date).valueOf()-j>1e3&&(clearInterval(i),i=null)):j=null},fps:function(a){if(void 0!==a){var b=1e3/Math.max(1,targetFps);l.physicsModified({timeout:b})}for(var c=0,d=0,e=f.length;e>d;d++)c+=f[d];var g=c/Math.max(1,f.length);return isNaN(g)?0:Math.round(1e3/g)},start:function(a){null===i&&(!k||a)&&(k=!1,c?d.postMessage({type:"start"}):(j=null,i=setInterval(l.physicsUpdate,l.system.parameters().timeout)))},stop:function(){k=!0,c?d.postMessage({type:"stop"}):null!==i&&(clearInterval(i),i=null)}};return l.init()},Node=function(a){this._id=_nextNodeId++,this.data=a||{},this._mass=void 0!==a.mass?a.mass:1,this._fixed=a.fixed===!0?!0:!1,this._p=new Point("number"==typeof a.x?a.x:null,"number"==typeof a.y?a.y:null),delete this.data.x,delete this.data.y,delete this.data.mass,delete this.data.fixed},_nextNodeId=1,Edge=function(a,b,c){this._id=_nextEdgeId--,this.source=a,this.target=b,this.length=void 0!==c.length?c.length:1,this.data=void 0!==c?c:{},delete this.data.length},_nextEdgeId=-1,Particle=function(a,b){this.p=a,this.m=b,this.v=new Point(0,0),this.f=new Point(0,0)};Particle.prototype.applyForce=function(a){this.f=this.f.add(a.divide(this.m))};var Spring=function(a,b,c,d){this.point1=a,this.point2=b,this.length=c,this.k=d};Spring.prototype.distanceToParticle=function(a){var b=that.point2.p.subtract(that.point1.p).normalize().normal(),c=a.p.subtract(that.point1.p);return Math.abs(c.x*b.x+c.y*b.y)};var Point=function(a,b){a&&a.hasOwnProperty("y")&&(b=a.y,a=a.x),this.x=a,this.y=b};Point.random=function(a){return a=void 0!==a?a:5,new Point(2*a*(Math.random()-.5),2*a*(Math.random()-.5))},Point.prototype={exploded:function(){return isNaN(this.x)||isNaN(this.y)},add:function(a){return new Point(this.x+a.x,this.y+a.y)},subtract:function(a){return new Point(this.x-a.x,this.y-a.y)},multiply:function(a){return new Point(this.x*a,this.y*a)},divide:function(a){return new Point(this.x/a,this.y/a)},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normal:function(){return new Point(-this.y,this.x)},normalize:function(){return this.divide(this.magnitude())}};var ParticleSystem=function(a,b,c,d,e,f,g,h){var i=[],j=null,k=0,l=null,m=.04,n=[20,20,20,20],o=null,p=null;if("object"==typeof a){var q=a;c=q.friction,a=q.repulsion,e=q.fps,f=q.dt,b=q.stiffness,d=q.gravity,g=q.precision,h=q.integrator}"verlet"!=h&&"euler"!=h&&(h="verlet"),c=isNaN(c)?.5:c,a=isNaN(a)?1e3:a,e=isNaN(e)?55:e,b=isNaN(b)?600:b,f=isNaN(f)?.02:f,g=isNaN(g)?.6:g,d=d===!0;var r,s=void 0!==e?1e3/e:20,t={integrator:h,repulsion:a,stiffness:b,friction:c,dt:f,gravity:d,precision:g,timeout:s},u={renderer:null,tween:null,nodes:{},edges:{},adjacency:{},names:{},kernel:null},v={parameters:function(a){return void 0!==a&&(isNaN(a.precision)||(a.precision=Math.max(0,Math.min(1,a.precision))),$.each(t,function(b){void 0!==a[b]&&(t[b]=a[b])}),u.kernel.physicsModified(a)),t},fps:function(a){return void 0===a?u.kernel.fps():void v.parameters({timeout:1e3/(a||50)})},start:function(){u.kernel.start()},stop:function(){u.kernel.stop()},addNode:function(a,b){b=b||{};var c=u.names[a];if(c)return c.data=b,c;if(void 0!=a){var d=void 0!=b.x?b.x:null,e=void 0!=b.y?b.y:null,f=b.fixed?1:0,g=new Node(b);return g.name=a,u.names[a]=g,u.nodes[g._id]=g,i.push({t:"addNode",id:g._id,m:g.mass,x:d,y:e,f:f}),v._notify(),g}},pruneNode:function(a){var b=v.getNode(a);"undefined"!=typeof u.nodes[b._id]&&(delete u.nodes[b._id],delete u.names[b.name]),$.each(u.edges,function(a,c){(c.source._id===b._id||c.target._id===b._id)&&v.pruneEdge(c)}),i.push({t:"dropNode",id:b._id}),v._notify()},getNode:function(a){return void 0!==a._id?a:"string"==typeof a||"number"==typeof a?u.names[a]:void 0},eachNode:function(a){$.each(u.nodes,function(b,c){if(null!=c._p.x&&null!=c._p.y){var d=null!==l?v.toScreen(c._p):c._p;a.call(v,c,d)}})},addEdge:function(a,b,c){a=v.getNode(a)||v.addNode(a),b=v.getNode(b)||v.addNode(b),c=c||{};var d=new Edge(a,b,c),e=a._id,f=b._id;u.adjacency[e]=u.adjacency[e]||{},u.adjacency[e][f]=u.adjacency[e][f]||[];var g=u.adjacency[e][f].length>0;if(g)return void $.extend(u.adjacency[e][f].data,d.data);u.edges[d._id]=d,u.adjacency[e][f].push(d);var h=void 0!==d.length?d.length:1;return i.push({t:"addSpring",id:d._id,fm:e,to:f,l:h}),v._notify(),d},pruneEdge:function(a){i.push({t:"dropSpring",id:a._id}),delete u.edges[a._id];for(var b in u.adjacency)for(var c in u.adjacency[b])for(var d=u.adjacency[b][c],e=d.length-1;e>=0;e--)u.adjacency[b][c][e]._id===a._id&&u.adjacency[b][c].splice(e,1);v._notify()},getEdges:function(a,b){return a=v.getNode(a),b=v.getNode(b),a&&b&&"undefined"!=typeof u.adjacency[a._id]&&"undefined"!=typeof u.adjacency[a._id][b._id]?u.adjacency[a._id][b._id]:[]},getEdgesFrom:function(a){if(a=v.getNode(a),!a)return[];if("undefined"!=typeof u.adjacency[a._id]){var b=[];return $.each(u.adjacency[a._id],function(a,c){b=b.concat(c)}),b}return[]},getEdgesTo:function(a){if(a=v.getNode(a),!a)return[];var b=[];return $.each(u.edges,function(c,d){d.target==a&&b.push(d)}),b},eachEdge:function(a){$.each(u.edges,function(b,c){var d=u.nodes[c.source._id]._p,e=u.nodes[c.target._id]._p;null!=d.x&&null!=e.x&&(d=null!==l?v.toScreen(d):d,e=null!==l?v.toScreen(e):e,d&&e&&a.call(v,c,d,e))})},prune:function(a){var b={dropped:{nodes:[],edges:[]}};return void 0===a?$.each(u.nodes,function(a,c){b.dropped.nodes.push(c),v.pruneNode(c)}):v.eachNode(function(c){var d=a.call(v,c,{from:v.getEdgesFrom(c),to:v.getEdgesTo(c)});d&&(b.dropped.nodes.push(c),v.pruneNode(c))}),b},graft:function(a){var b={added:{nodes:[],edges:[]}};return a.nodes&&$.each(a.nodes,function(a,c){var d=v.getNode(a);d?d.data=c:b.added.nodes.push(v.addNode(a,c)),u.kernel.start()}),a.edges&&$.each(a.edges,function(a,c){var d=v.getNode(a);d||b.added.nodes.push(v.addNode(a,{})),$.each(c,function(c,d){var e=v.getNode(c);e||b.added.nodes.push(v.addNode(c,{}));var f=v.getEdges(a,c);f.length>0?f[0].data=d:b.added.edges.push(v.addEdge(a,c,d))})}),b},merge:function(a){var b={added:{nodes:[],edges:[]},dropped:{nodes:[],edges:[]}};$.each(u.edges,function(c,d){(void 0===a.edges[d.source.name]||void 0===a.edges[d.source.name][d.target.name])&&(v.pruneEdge(d),b.dropped.edges.push(d))});var c=v.prune(function(c){return void 0===a.nodes[c.name]?(b.dropped.nodes.push(c),!0):void 0}),d=v.graft(a);return b.added.nodes=b.added.nodes.concat(d.added.nodes),b.added.edges=b.added.edges.concat(d.added.edges),b.dropped.nodes=b.dropped.nodes.concat(c.dropped.nodes),b.dropped.edges=b.dropped.edges.concat(c.dropped.edges),b},tweenNode:function(a,b,c){var d=v.getNode(a);d&&u.tween.to(d,b,c)},tweenEdge:function(a,b,c,d){if(void 0===d)v._tweenEdge(a,b,c);else{var e=v.getEdges(a,b);$.each(e,function(a,b){v._tweenEdge(b,c,d)})}},_tweenEdge:function(a,b,c){a&&void 0!==a._id&&u.tween.to(a,b,c)},_updateGeometry:function(a){if(void 0!=a){var b=a.epoch<k;r=a.energy;var c=a.geometry;if(void 0!==c)for(var d=0,e=c.length/3;e>d;d++){var f=c[3*d];b&&void 0==u.nodes[f]||(u.nodes[f]._p.x=c[3*d+1],u.nodes[f]._p.y=c[3*d+2])}}},screen:function(a){return void 0==a?{size:l?objcopy(l):void 0,padding:n.concat(),step:m}:(void 0!==a.size&&v.screenSize(a.size.width,a.size.height),isNaN(a.step)||v.screenStep(a.step),void(void 0!==a.padding&&v.screenPadding(a.padding)))},screenSize:function(a,b){l={width:a,height:b},v._updateBounds()},screenPadding:function(a,b,c,d){trbl=$.isArray(a)?a:[a,b,c,d];var e=trbl[0],f=trbl[1],g=trbl[2];void 0===f?trbl=[e,e,e,e]:void 0==g&&(trbl=[e,f,e,f]),n=trbl},screenStep:function(a){m=a},toScreen:function(a){if(o&&l){var b=n||[0,0,0,0],c=o.bottomright.subtract(o.topleft),d=b[3]+a.subtract(o.topleft).divide(c.x).x*(l.width-(b[1]+b[3])),e=b[0]+a.subtract(o.topleft).divide(c.y).y*(l.height-(b[0]+b[2]));return arbor.Point(d,e)}},fromScreen:function(a){if(o&&l){var b=n||[0,0,0,0],c=o.bottomright.subtract(o.topleft),d=(a.x-b[3])/(l.width-(b[1]+b[3]))*c.x+o.topleft.x,e=(a.y-b[0])/(l.height-(b[0]+b[2]))*c.y+o.topleft.y;return arbor.Point(d,e)}},_updateBounds:function(a){if(null!==l){p=a?a:v.bounds();var b=new Point(p.bottomright.x,p.bottomright.y),c=new Point(p.topleft.x,p.topleft.y),d=b.subtract(c),e=c.add(d.divide(2)),f=4,g=new Point(Math.max(d.x,f),Math.max(d.y,f));if(p.topleft=e.subtract(g.divide(2)),p.bottomright=e.add(g.divide(2)),!o)return $.isEmptyObject(u.nodes)?!1:(o=p,!0);var h=m;_newBounds={bottomright:o.bottomright.add(p.bottomright.subtract(o.bottomright).multiply(h)),topleft:o.topleft.add(p.topleft.subtract(o.topleft).multiply(h))};var i=new Point(o.topleft.subtract(_newBounds.topleft).magnitude(),o.bottomright.subtract(_newBounds.bottomright).magnitude());return i.x*l.width>1||i.y*l.height>1?(o=_newBounds,!0):!1}},energy:function(){return r},bounds:function(){var a=null,b=null;return $.each(u.nodes,function(c,d){if(!a)return a=new Point(d._p),void(b=new Point(d._p));var e=d._p;null!==e.x&&null!==e.y&&(e.x>a.x&&(a.x=e.x),e.y>a.y&&(a.y=e.y),e.x<b.x&&(b.x=e.x),e.y<b.y&&(b.y=e.y))}),a&&b?{bottomright:a,topleft:b}:{topleft:new Point(-1,-1),bottomright:new Point(1,1)}},nearest:function(a){null!==l&&(a=v.fromScreen(a));var b={node:null,point:null,distance:null};return $.each(u.nodes,function(c,d){var e=d._p;if(null!==e.x&&null!==e.y){var f=e.subtract(a).magnitude();(null===b.distance||f<b.distance)&&(b={node:d,point:e,distance:f},null!==l&&(b.screenPoint=v.toScreen(e)))}}),b.node?(null!==l&&(b.distance=v.toScreen(b.node.p).subtract(v.toScreen(a)).magnitude()),b):null},_notify:function(){null===j?k++:clearTimeout(j),j=setTimeout(v._synchronize,20)},_synchronize:function(){i.length>0&&(u.kernel.graphChanged(i),i=[],j=null)}};return u.kernel=Kernel(v),u.tween=u.kernel.tween||null,Node.prototype.__defineGetter__("p",function(){var a=this,b={};return b.__defineGetter__("x",function(){return a._p.x}),b.__defineSetter__("x",function(b){u.kernel.particleModified(a._id,{x:b})}),b.__defineGetter__("y",function(){return a._p.y}),b.__defineSetter__("y",function(b){u.kernel.particleModified(a._id,{y:b})}),b.__proto__=Point.prototype,b}),Node.prototype.__defineSetter__("p",function(a){this._p.x=a.x,this._p.y=a.y,u.kernel.particleModified(this._id,{x:a.x,y:a.y})}),Node.prototype.__defineGetter__("mass",function(){return this._mass}),Node.prototype.__defineSetter__("mass",function(a){this._mass=a,u.kernel.particleModified(this._id,{m:a})}),Node.prototype.__defineSetter__("tempMass",function(a){u.kernel.particleModified(this._id,{_m:a})}),Node.prototype.__defineGetter__("fixed",function(){return this._fixed}),Node.prototype.__defineSetter__("fixed",function(a){this._fixed=a,u.kernel.particleModified(this._id,{f:a?1:0})}),v},BarnesHutTree=function(){var a=[],b=0,c=null,d=.5,e={init:function(a,f,g){d=g,b=0,c=e._newBranch(),c.origin=a,c.size=f.subtract(a)},insert:function(a){for(var b=c,d=[a];d.length;){var f=d.shift(),g=f._m||f.m,h=e._whichQuad(f,b);if(void 0===b[h])b[h]=f,b.mass+=g,b.p=b.p?b.p.add(f.p.multiply(g)):f.p.multiply(g);else if("origin"in b[h])b.mass+=g,b.p=b.p?b.p.add(f.p.multiply(g)):f.p.multiply(g),b=b[h],d.unshift(f);else{var i=b.size.divide(2),j=new Point(b.origin);"s"==h[0]&&(j.y+=i.y),"e"==h[1]&&(j.x+=i.x);var k=b[h];if(b[h]=e._newBranch(),b[h].origin=j,b[h].size=i,b.mass=g,b.p=f.p.multiply(g),b=b[h],k.p.x===f.p.x&&k.p.y===f.p.y){var l=.08*i.x,m=.08*i.y;k.p.x=Math.min(j.x+i.x,Math.max(j.x,k.p.x-l/2+Math.random()*l)),k.p.y=Math.min(j.y+i.y,Math.max(j.y,k.p.y-m/2+Math.random()*m))}d.push(k),d.unshift(f)}}},applyForces:function(a,b){for(var e=[c];e.length;)if(node=e.shift(),void 0!==node&&a!==node)if("f"in node){var f=a.p.subtract(node.p),g=Math.max(1,f.magnitude()),h=(f.magnitude()>0?f:Point.random(1)).normalize();a.applyForce(h.multiply(b*(node._m||node.m)).divide(g*g))}else{var i=a.p.subtract(node.p.divide(node.mass)).magnitude(),j=Math.sqrt(node.size.x*node.size.y);if(j/i>d)e.push(node.ne),e.push(node.nw),e.push(node.se),e.push(node.sw);else{var f=a.p.subtract(node.p.divide(node.mass)),g=Math.max(1,f.magnitude()),h=(f.magnitude()>0?f:Point.random(1)).normalize();a.applyForce(h.multiply(b*node.mass).divide(g*g))}}},_whichQuad:function(a,b){if(a.p.exploded())return null;var c=a.p.subtract(b.origin),d=b.size.divide(2);return c.y<d.y?c.x<d.x?"nw":"ne":c.x<d.x?"sw":"se"},_newBranch:function(){if(a[b]){var c=a[b];c.ne=c.nw=c.se=c.sw=void 0,c.mass=0,delete c.p}else c={origin:null,size:null,nw:void 0,ne:void 0,sw:void 0,se:void 0,mass:0},a[b]=c;return b++,c}};return e},Physics=function(a,b,c,d,e,f){var g=BarnesHutTree(),h={particles:{},springs:{}},i={particles:{}},j=[],k=[],l=0,m={sum:0,max:0,mean:0},n={topleft:new Point(-1,-1),bottomright:new Point(1,1)},o=1e3,p={integrator:["verlet","euler"].indexOf(f)>=0?f:"verlet",stiffness:void 0!==b?b:1e3,repulsion:void 0!==c?c:600,friction:void 0!==d?d:.3,gravity:!1,dt:void 0!==a?a:.02,theta:.4,init:function(){return p},modifyPhysics:function(a){$.each(["stiffness","repulsion","friction","gravity","dt","precision","integrator"],function(b,c){if(void 0!==a[c]){if("precision"==c)return void(p.theta=1-a[c]);if(p[c]=a[c],"stiffness"==c){var d=a[c];$.each(h.springs,function(a,b){b.k=d})}}})},addNode:function(a){var b=a.id,c=a.m,d=n.bottomright.x-n.topleft.x,e=n.bottomright.y-n.topleft.y,f=new Point(null!=a.x?a.x:n.topleft.x+d*Math.random(),null!=a.y?a.y:n.topleft.y+e*Math.random());h.particles[b]=new Particle(f,c),h.particles[b].connections=0,h.particles[b].fixed=1===a.f,i.particles[b]=h.particles[b],j.push(h.particles[b])},dropNode:function(a){var b=a.id,c=h.particles[b],d=$.inArray(c,j);d>-1&&j.splice(d,1),delete h.particles[b],delete i.particles[b]},modifyNode:function(a,b){if(a in h.particles){var c=h.particles[a];"x"in b&&(c.p.x=b.x),"y"in b&&(c.p.y=b.y),"m"in b&&(c.m=b.m),"f"in b&&(c.fixed=1===b.f),"_m"in b&&(void 0===c._m&&(c._m=c.m),c.m=b._m)}},addSpring:function(a){var b=a.id,c=a.l,d=h.particles[a.fm],e=h.particles[a.to];void 0!==d&&void 0!==e&&(h.springs[b]=new Spring(d,e,c,p.stiffness),k.push(h.springs[b]),d.connections++,e.connections++,delete i.particles[a.fm],delete i.particles[a.to])},dropSpring:function(a){var b=a.id,c=h.springs[b];c.point1.connections--,c.point2.connections--;var d=$.inArray(c,k);d>-1&&k.splice(d,1),delete h.springs[b]},_update:function(a){return l++,$.each(a,function(a,b){b.t in p&&p[b.t](b)}),l},tick:function(){p.tendParticles(),"euler"==p.integrator?(p.updateForces(),p.updateVelocity(p.dt),p.updatePosition(p.dt)):(p.updateForces(),p.cacheForces(),p.updatePosition(p.dt),p.updateForces(),p.updateVelocity(p.dt)),p.tock()},tock:function(){var a=[];$.each(h.particles,function(b,c){a.push(b),a.push(c.p.x),a.push(c.p.y)}),e&&e({geometry:a,epoch:l,energy:m,bounds:n})},tendParticles:function(){$.each(h.particles,function(a,b){void 0!==b._m&&(Math.abs(b.m-b._m)<1?(b.m=b._m,delete b._m):b.m*=.98),b.v.x=b.v.y=0})},updateForces:function(){p.repulsion>0&&(p.theta>0?p.applyBarnesHutRepulsion():p.applyBruteForceRepulsion()),p.stiffness>0&&p.applySprings(),p.applyCenterDrift(),p.gravity&&p.applyCenterGravity()},cacheForces:function(){$.each(h.particles,function(a,b){b._F=b.f})},applyBruteForceRepulsion:function(){$.each(h.particles,function(a,b){$.each(h.particles,function(a,c){if(b!==c){var d=b.p.subtract(c.p),e=Math.max(1,d.magnitude()),f=(d.magnitude()>0?d:Point.random(1)).normalize();b.applyForce(f.multiply(p.repulsion*(c._m||c.m)*.5).divide(e*e*.5)),c.applyForce(f.multiply(p.repulsion*(b._m||b.m)*.5).divide(e*e*-.5))}})})},applyBarnesHutRepulsion:function(){if(n.topleft&&n.bottomright){var a=new Point(n.bottomright),b=new Point(n.topleft);g.init(b,a,p.theta),$.each(h.particles,function(a,b){g.insert(b)}),$.each(h.particles,function(a,b){g.applyForces(b,p.repulsion)})}},applySprings:function(){$.each(h.springs,function(a,b){var c=b.point2.p.subtract(b.point1.p),d=b.length-c.magnitude(),e=(c.magnitude()>0?c:Point.random(1)).normalize();b.point1.applyForce(e.multiply(b.k*d*-.5)),b.point2.applyForce(e.multiply(b.k*d*.5))})},applyCenterDrift:function(){var a=0,b=new Point(0,0);if($.each(h.particles,function(c,d){b.add(d.p),a++}),0!=a){var c=b.divide(-a);$.each(h.particles,function(a,b){b.applyForce(c)})}},applyCenterGravity:function(){$.each(h.particles,function(a,b){var c=b.p.multiply(-1);b.applyForce(c.multiply(p.repulsion/100))})},updateVelocity:function(a){var b=0,c=0,d=0;$.each(h.particles,function(e,f){if(f.fixed)return f.v=new Point(0,0),void(f.f=new Point(0,0));f.v="euler"==p.integrator?f.v.add(f.f.multiply(a)).multiply(1-p.friction):f.v.add(f.f.add(f._F.divide(f._m)).multiply(.5*a)).multiply(1-p.friction),f.f.x=f.f.y=0;var g=f.v.magnitude();g>o&&(f.v=f.v.divide(g*g));var g=f.v.magnitude(),h=g*g;b+=h,c=Math.max(h,c),d++}),m={sum:b,max:c,mean:b/d,n:d}},updatePosition:function(a){var b=null,c=null;$.each(h.particles,function(d,e){if("euler"==p.integrator)e.p=e.p.add(e.v.multiply(a));else{var f=e.f.multiply(.5*a*a).divide(e.m);e.p=e.p.add(e.v.multiply(a)).add(f)}if(!b)return b=new Point(e.p.x,e.p.y),void(c=new Point(e.p.x,e.p.y));var g=e.p;null!==g.x&&null!==g.y&&(g.x>b.x&&(b.x=g.x),g.y>b.y&&(b.y=g.y),g.x<c.x&&(c.x=g.x),g.y<c.y&&(c.y=g.y))}),n={topleft:c||new Point(-1,-1),bottomright:b||new Point(1,1)}},systemEnergy:function(){return m}};return p.init()},_nearParticle=function(a,b){var b=b||0,c=a.x,d=a.y,e=2*b;return new Point(c-b+Math.random()*e,d-b+Math.random()*e)};return"undefined"==typeof window?function(){$={each:function(a,b){if($.isArray(a))for(var c=0,d=a.length;d>c;c++)b(c,a[c]);else for(var e in a)b(e,a[e])},map:function(a,b){var c=[];return $.each(a,function(a,d){var e=b(d);void 0!==e&&c.push(e)}),c},extend:function(a,b){if("object"!=typeof b)return a;for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},isArray:function(a){return a?-1!=a.constructor.toString().indexOf("Array"):!1},inArray:function(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c;return-1},isEmptyObject:function(a){if("object"!=typeof a)return!1;var b=!0;return $.each(a,function(){b=!1}),b}};var a=function(){var a=20,b=null,c=null,d=null,e=((new Date).valueOf(),{init:function(a){return e.timeout(a.timeout),b=Physics(a.dt,a.stiffness,a.repulsion,a.friction,e.tock),e},timeout:function(b){b!=a&&(a=b,null!==c&&(e.stop(),e.go()))},go:function(){null===c&&(d=null,c=setInterval(e.tick,a))},stop:function(){null!==c&&(clearInterval(c),c=null)},tick:function(){b.tick();var a=b.systemEnergy();(a.mean+a.max)/2<.05?(null===d&&(d=(new Date).valueOf()),(new Date).valueOf()-d>1e3&&e.stop()):d=null},tock:function(a){a.type="geometry",postMessage(a)},modifyNode:function(a,c){b.modifyNode(a,c),e.go()},modifyPhysics:function(a){b.modifyPhysics(a)},update:function(a){b._update(a)}});return e},b=a();onmessage=function(a){if(!a.data.type)return void postMessage("¿kérnèl?");if("physics"==a.data.type){var c=a.data.physics;return void b.init(a.data.physics)}switch(a.data.type){case"modify":b.modifyNode(a.data.id,a.data.mods);break;case"changes":b.update(a.data.changes),b.go();break;case"start":b.go();break;case"stop":b.stop();break;case"sys":var c=a.data.param||{};isNaN(c.timeout)||b.timeout(c.timeout),b.modifyPhysics(c),b.go()}}}():(arbor="undefined"!=typeof arbor?arbor:{},void $.extend(arbor,{ParticleSystem:ParticleSystem,Point:function(a,b){return new Point(a,b)},etc:{trace:trace,dirname:dirname,basename:basename,ordinalize:ordinalize,objcopy:objcopy,objcmp:objcmp,objkeys:objkeys,objmerge:objmerge,uniq:uniq,arbor_path:arbor_path}}))}(this.jQuery)(function($){var trace=function(msg){if("undefined"!=typeof window&&window.console){for(var len=arguments.length,args=[],i=0;len>i;i++)args.push("arguments["+i+"]");eval("console.log("+args.join(",")+")")}},dirname=function(a){var b=a.replace(/^\/?(.*?)\/?$/,"$1").split("/");return b.pop(),"/"+b.join("/")},basename=function(a){var b=a.replace(/^\/?(.*?)\/?$/,"$1").split("/"),c=b.pop();return""==c?null:c},_ordinalize_re=/(\d)(?=(\d\d\d)+(?!\d))/g,ordinalize=function(a){var b=""+a;return 11e3>a?b=(""+a).replace(_ordinalize_re,"$1,"):1e6>a?b=Math.floor(a/1e3)+"k":1e9>a&&(b=(""+Math.floor(a/1e3)).replace(_ordinalize_re,"$1,")+"m"),b},nano=function(a,b){return a.replace(/\{([\w\-\.]*)}/g,function(a,c){var d=c.split("."),e=b[d.shift()];return $.each(d,function(){e=e.hasOwnProperty(this)?e[this]:a}),e})},objcopy=function(a){if(void 0===a)return void 0;if(null===a)return null;if(a.parentNode)return a;switch(typeof a){case"string":return a.substring(0);case"number":return a+0;case"boolean":return a===!0}var b=$.isArray(a)?[]:{};return $.each(a,function(a,c){b[a]=objcopy(c)}),b},objmerge=function(a,b){a=a||{},b=b||{};var c=objcopy(a);for(var d in b)c[d]=b[d];return c},objcmp=function(a,b,c){if(!a||!b)return a===b;if(typeof a!=typeof b)return!1;if("object"!=typeof a)return a===b;if($.isArray(a)){if(!$.isArray(b))return!1;if(a.length!=b.length)return!1}else{var d=[];for(var e in a)a.hasOwnProperty(e)&&d.push(e);var f=[];for(var e in b)b.hasOwnProperty(e)&&f.push(e);if(c||(d.sort(),f.sort()),d.join(",")!==f.join(","))return!1}var g=!0;return $.each(a,function(c){var d=objcmp(a[c],b[c]);return g=g&&d,g?void 0:!1}),g},objkeys=function(a){var b=[];return $.each(a,function(c){a.hasOwnProperty(c)&&b.push(c)}),b},objcontains=function(a){if(!a||"object"!=typeof a)return!1;for(var b=1,c=arguments.length;c>b;b++)if(a.hasOwnProperty(arguments[b]))return!0;return!1},uniq=function(a){for(var b=a.length,c={},d=0;b>d;d++)c[a[d]]=!0;return objkeys(c)},arbor_path=function(){var a=$("script").map(function(){var a=$(this).attr("src");if(a)return a.match(/arbor[^\/\.]*.js|dev.js/)?a.match(/.*\//)||"/":void 0});return a.length>0?a[0]:null},Colors=function(){var a=/#[0-9a-f]{6}/i,b=/#(..)(..)(..)/,c=function(a){var b=a.toString(16);return 2==b.length?b:"0"+b},d=function(a){return parseInt(a,16)},e=function(a){if(!a||"object"!=typeof a)return!1;var b=objkeys(a).sort().join("");return"abgr"==b?!0:void 0},f={CSS:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},decode:function(c){for(var g=arguments.length,h=g-1;h>=0;h--)void 0===arguments[h]&&g--;var i=arguments;if(!c)return null;if(1==g&&e(c))return c;var j=null;if("string"==typeof c){var k=1;2==g&&(k=i[1]);var l=f.CSS[c.toLowerCase()];void 0!==l&&(c=l);var m=c.match(a);if(m){if(vals=c.match(b),!vals||!vals.length||4!=vals.length)return null;j={r:d(vals[1]),g:d(vals[2]),b:d(vals[3]),a:k}}}else"number"==typeof c&&(g>=3?(j={r:i[0],g:i[1],b:i[2],a:1},g>=4&&(j.a*=i[3])):g>=1&&(j={r:i[0],g:i[0],b:i[0],a:1},2==g&&(j.a*=i[1])));return j},validate:function(b){return b&&"string"==typeof b?void 0!==f.CSS[b.toLowerCase()]?!0:b.match(a)?!0:!1:!1},mix:function(a,b){f.decode(a),f.decode(b)},blend:function(a,b){b=void 0!==b?Math.max(0,Math.min(1,b)):1;var c=f.decode(a);if(!c)return null;if(1==b)return a;var c=a;"string"==typeof a&&(c=f.decode(a));var d=objcopy(c);return d.a*=b,nano("rgba({r},{g},{b},{a})",d)},encode:function(a){return e(a)||(a=f.decode(a),e(a))?1==a.a?nano("#{r}{g}{b}",{r:c(a.r),g:c(a.g),b:c(a.b)}):nano("rgba({r},{g},{b},{a})",a):null}};return f}(),Easing=function(){var a={linear:function(a,b,c,d){return c*(a/d)+b},quadin:function(a,b,c,d){return c*(a/=d)*a+b},quadout:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},quadinout:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},cubicin:function(a,b,c,d){return c*(a/=d)*a*a+b},cubicout:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},cubicinout:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},quartin:function(a,b,c,d){return c*(a/=d)*a*a*a+b},quartout:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},quartinout:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},quintin:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},quintout:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},quintinout:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},sinein:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},sineout:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},sineinout:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},expoin:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},expoout:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},expoinout:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},circin:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},circout:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},circinout:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},elasticin:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f))+b},elasticout:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return g*Math.pow(2,-10*a)*Math.sin(2*(a*d-e)*Math.PI/f)+c+b},elasticinout:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(2==(a/=d/2))return b+c;if(f||(f=.3*d*1.5),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return 1>a?-.5*g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)+b:g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)*.5+c+b},backin:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},backout:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},backinout:function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},bouncein:function(b,c,d,e){return d-a.bounceOut(e-b,0,d,e)+c},bounceout:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},bounceinout:function(b,c,d,e){return e/2>b?.5*a.bounceIn(2*b,0,d,e)+c:.5*a.bounceOut(2*b-e,0,d,e)+.5*d+c}};return a}(),Tween=function(){var a={},b=!0,c={init:function(){return c},busy:function(){var b=!1;for(var c in a){b=!0;break}return b},to:function(c,d,e){var f=(new Date).valueOf(),g={},h={from:{},to:{},colors:{},node:c,t0:f,t1:f+1e3*d,dur:1e3*d},i="linear";for(var j in e)if("easing"!=j)if("delay"!=j)Colors.validate(e[j])?(h.colors[j]=[Colors.decode(c.data[j]),Colors.decode(e[j]),e[j]],g[j]=!0):(h.from[j]=void 0!=c.data[j]?c.data[j]:e[j],h.to[j]=e[j],g[j]=!0);else{var k=1e3*(e[j]||0);h.t0+=k,h.t1+=k}else{var l=e[j].toLowerCase();l in Easing&&(i=l)}if(h.ease=Easing[i],void 0===a[c._id]&&(a[c._id]=[]),a[c._id].push(h),a.length>1)for(var m=a.length-2;m>=0;m++){var n=a[m];for(var j in n.to)j in g?delete n.to[j]:g[j]=!0;for(var j in n.colors)j in g?delete n.colors[j]:g[j]=!0;$.isEmptyObject(n.colors)&&$.isEmptyObject(n.to)&&a.splice(m,1)}b=!1},interpolate:function(a,b,c,d){d=(d||"").toLowerCase();var e=Easing.linear;d in Easing&&(e=Easing[d]);var f=e(a,0,1,1);return Colors.validate(b)&&Colors.validate(c)?lerpRGB(f,b,c):isNaN(b)?"string"==typeof b?.5>f?b:c:void 0:lerpNumber(f,b,c)},tick:function(){var c=!0;for(var d in a){c=!1;break}if(!c){var e=(new Date).valueOf();return $.each(a,function(b,c){var d=!1;$.each(c,function(a,b){var c=b.ease(e-b.t0,0,1,b.dur);c=Math.min(1,c);var f=b.from,g=b.to,h=b.colors,i=b.node.data,j=1==c;for(var k in g)switch(typeof g[k]){case"number":i[k]=lerpNumber(c,f[k],g[k]),"alpha"==k&&(i[k]=Math.max(0,Math.min(1,i[k])));break;case"string":j&&(i[k]=g[k])}for(var k in h)if(j)i[k]=h[k][2];else{var l=lerpRGB(c,h[k][0],h[k][1]);i[k]=Colors.encode(l)}j&&(b.completed=!0,d=!0)}),d&&(a[b]=$.map(c,function(a){return a.completed?void 0:a
}),0==a[b].length&&delete a[b])}),b=$.isEmptyObject(a)}}};return c.init()},lerpNumber=function(a,b,c){return b+a*(c-b)},lerpRGB=function(a,b,c){a=Math.max(Math.min(a,1),0);var d={};return $.each("rgba".split(""),function(e,f){d[f]=Math.round(b[f]+a*(c[f]-b[f]))}),d};arbor="undefined"!=typeof arbor?arbor:{},$.extend(arbor,{Tween:Tween,colors:{CSS:Colors.CSS,validate:Colors.validate,decode:Colors.decode,encode:Colors.encode,blend:Colors.blend}})})(this.jQuery)(function($){var trace=function(msg){if("undefined"!=typeof window&&window.console){for(var len=arguments.length,args=[],i=0;len>i;i++)args.push("arguments["+i+"]");eval("console.log("+args.join(",")+")")}},dirname=function(a){var b=a.replace(/^\/?(.*?)\/?$/,"$1").split("/");return b.pop(),"/"+b.join("/")},basename=function(a){var b=a.replace(/^\/?(.*?)\/?$/,"$1").split("/"),c=b.pop();return""==c?null:c},_ordinalize_re=/(\d)(?=(\d\d\d)+(?!\d))/g,ordinalize=function(a){var b=""+a;return 11e3>a?b=(""+a).replace(_ordinalize_re,"$1,"):1e6>a?b=Math.floor(a/1e3)+"k":1e9>a&&(b=(""+Math.floor(a/1e3)).replace(_ordinalize_re,"$1,")+"m"),b},nano=function(a,b){return a.replace(/\{([\w\-\.]*)}/g,function(a,c){var d=c.split("."),e=b[d.shift()];return $.each(d,function(){e=e.hasOwnProperty(this)?e[this]:a}),e})},objcopy=function(a){if(void 0===a)return void 0;if(null===a)return null;if(a.parentNode)return a;switch(typeof a){case"string":return a.substring(0);case"number":return a+0;case"boolean":return a===!0}var b=$.isArray(a)?[]:{};return $.each(a,function(a,c){b[a]=objcopy(c)}),b},objmerge=function(a,b){a=a||{},b=b||{};var c=objcopy(a);for(var d in b)c[d]=b[d];return c},objcmp=function(a,b,c){if(!a||!b)return a===b;if(typeof a!=typeof b)return!1;if("object"!=typeof a)return a===b;if($.isArray(a)){if(!$.isArray(b))return!1;if(a.length!=b.length)return!1}else{var d=[];for(var e in a)a.hasOwnProperty(e)&&d.push(e);var f=[];for(var e in b)b.hasOwnProperty(e)&&f.push(e);if(c||(d.sort(),f.sort()),d.join(",")!==f.join(","))return!1}var g=!0;return $.each(a,function(c){var d=objcmp(a[c],b[c]);return g=g&&d,g?void 0:!1}),g},objkeys=function(a){var b=[];return $.each(a,function(c){a.hasOwnProperty(c)&&b.push(c)}),b},objcontains=function(a){if(!a||"object"!=typeof a)return!1;for(var b=1,c=arguments.length;c>b;b++)if(a.hasOwnProperty(arguments[b]))return!0;return!1},uniq=function(a){for(var b=a.length,c={},d=0;b>d;d++)c[a[d]]=!0;return objkeys(c)},arbor_path=function(){var a=$("script").map(function(){var a=$(this).attr("src");if(a)return a.match(/arbor[^\/\.]*.js|dev.js/)?a.match(/.*\//)||"/":void 0});return a.length>0?a[0]:null},Colors=function(){var a=/#[0-9a-f]{6}/i,b=/#(..)(..)(..)/,c=function(a){var b=a.toString(16);return 2==b.length?b:"0"+b},d=function(a){return parseInt(a,16)},e=function(a){if(!a||"object"!=typeof a)return!1;var b=objkeys(a).sort().join("");return"abgr"==b?!0:void 0},f={CSS:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},decode:function(c){for(var g=arguments.length,h=g-1;h>=0;h--)void 0===arguments[h]&&g--;var i=arguments;if(!c)return null;if(1==g&&e(c))return c;var j=null;if("string"==typeof c){var k=1;2==g&&(k=i[1]);var l=f.CSS[c.toLowerCase()];void 0!==l&&(c=l);var m=c.match(a);if(m){if(vals=c.match(b),!vals||!vals.length||4!=vals.length)return null;j={r:d(vals[1]),g:d(vals[2]),b:d(vals[3]),a:k}}}else"number"==typeof c&&(g>=3?(j={r:i[0],g:i[1],b:i[2],a:1},g>=4&&(j.a*=i[3])):g>=1&&(j={r:i[0],g:i[0],b:i[0],a:1},2==g&&(j.a*=i[1])));return j},validate:function(b){return b&&"string"==typeof b?void 0!==f.CSS[b.toLowerCase()]?!0:b.match(a)?!0:!1:!1},mix:function(a,b){f.decode(a),f.decode(b)},blend:function(a,b){b=void 0!==b?Math.max(0,Math.min(1,b)):1;var c=f.decode(a);if(!c)return null;if(1==b)return a;var c=a;"string"==typeof a&&(c=f.decode(a));var d=objcopy(c);return d.a*=b,nano("rgba({r},{g},{b},{a})",d)},encode:function(a){return e(a)||(a=f.decode(a),e(a))?1==a.a?nano("#{r}{g}{b}",{r:c(a.r),g:c(a.g),b:c(a.b)}):nano("rgba({r},{g},{b},{a})",a):null}};return f}(),Primitives=function(a,b){var c=function(a,b,c,d,e){this.x=a,this.y=b,this.w=c,this.h=d,this.style=void 0!==e?e:{}};c.prototype={draw:function(a){this._draw(a)},_draw:function(c,d,e,f,g){if(objcontains(c,"stroke","fill","width")&&(g=c),void 0!==this.x&&(c=this.x,d=this.y,e=this.w,f=this.h,g=objmerge(this.style,g)),g=objmerge(b,g),g.stroke||g.fill){var h=.5522848;ox=e/2*h,oy=f/2*h,xe=c+e,ye=d+f,xm=c+e/2,ym=d+f/2,a.save(),a.beginPath(),a.moveTo(c,ym),a.bezierCurveTo(c,ym-oy,xm-ox,d,xm,d),a.bezierCurveTo(xm+ox,d,xe,ym-oy,xe,ym),a.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye),a.bezierCurveTo(xm-ox,ye,c,ym+oy,c,ym),a.closePath(),null!==g.fill&&(a.fillStyle=void 0!==g.alpha?Colors.blend(g.fill,g.alpha):Colors.encode(g.fill),a.fill()),null!==g.stroke&&(a.strokeStyle=Colors.encode(g.stroke),isNaN(g.width)||(a.lineWidth=g.width),a.stroke()),a.restore()}}};var d=function(a,b,c,d,e,f){objcontains(e,"stroke","fill","width")&&(f=e,e=0),this.x=a,this.y=b,this.w=c,this.h=d,this.r=void 0!==e?e:0,this.style=void 0!==f?f:{}};d.prototype={draw:function(a){this._draw(a)},_draw:function(c,d,e,f,g,h){if(objcontains(g,"stroke","fill","width","alpha")?(h=g,g=0):objcontains(c,"stroke","fill","width","alpha")&&(h=c),void 0!==this.x&&(c=this.x,d=this.y,e=this.w,f=this.h,h=objmerge(this.style,h)),h=objmerge(b,h),h.stroke||h.fill){var i=g>0;a.save(),a.beginPath(),a.moveTo(c+g,d),a.lineTo(c+e-g,d),i&&a.quadraticCurveTo(c+e,d,c+e,d+g),a.lineTo(c+e,d+f-g),i&&a.quadraticCurveTo(c+e,d+f,c+e-g,d+f),a.lineTo(c+g,d+f),i&&a.quadraticCurveTo(c,d+f,c,d+f-g),a.lineTo(c,d+g),i&&a.quadraticCurveTo(c,d,c+g,d),null!==h.fill&&(a.fillStyle=void 0!==h.alpha?Colors.blend(h.fill,h.alpha):Colors.encode(h.fill),a.fill()),null!==h.stroke&&(a.strokeStyle=Colors.encode(h.stroke),isNaN(h.width)||(a.lineWidth=h.width),a.stroke()),a.restore()}}};var e=function(a,b,c,d,e){void 0!==e||"number"==typeof d?(this.points=[{x:a,y:b},{x:c,y:d}],this.style=e||{}):$.isArray(a)?(this.points=a,this.style=b||{}):(this.points=[a,b],this.style=c||{})};e.prototype={draw:function(c){if(!(this.points.length<2)){var d=[];$.isArray(this.points[0])?d=this.points:d.push(this.points),a.save(),a.beginPath(),$.each(d,function(b,c){a.moveTo(c[0].x+.5,c[0].y+.5),$.each(c,function(b,c){0!=b&&a.lineTo(c.x+.5,c.y+.5)})});var e=$.extend(objmerge(b,this.style),c);if(e.closed&&a.closePath(),void 0!==e.fill){var f=Colors.decode(e.fill,void 0!==e.alpha?e.alpha:1);f&&(a.fillStyle=Colors.encode(f)),a.fill()}if(void 0!==e.stroke){var g=Colors.decode(e.stroke,void 0!==e.alpha?e.alpha:1);g&&(a.strokeStyle=Colors.encode(g)),isNaN(e.width)||(a.lineWidth=e.width),a.stroke()}a.restore()}}};var f=function(a,b,c,d){var e=Colors.decode(a,b,c,d);e&&(this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a)};return f.prototype={toString:function(){return Colors.encode(this)},blend:function(){trace("blend",this.r,this.g,this.b,this.a)}},{_Oval:c,_Rect:d,_Color:f,_Path:e}},Graphics=function(a){var b=$(a),c=$(b).get(0).getContext("2d"),d={},e={background:null,fill:null,stroke:null,width:0},f={},g={font:"sans-serif",size:12,align:"left",color:Colors.decode("black"),alpha:1,baseline:"ideographic"},h=[],i=Primitives(c,e,g),j=i._Oval,k=i._Rect,l=i._Color,m=i._Path,n={init:function(){return c?n:null},size:function(a,c){return isNaN(a)||isNaN(c)||b.attr({width:a,height:c}),{width:b.attr("width"),height:b.attr("height")}},clear:function(a,d,f,g){arguments.length<4&&(a=0,d=0,f=b.attr("width"),g=b.attr("height")),c.clearRect(a,d,f,g),null!==e.background&&(c.save(),c.fillStyle=Colors.encode(e.background),c.fillRect(a,d,f,g),c.restore())},background:function(a,b,c,d){if(null==a)return e.background=null,null;var f=Colors.decode(a,b,c,d);f&&(e.background=f,n.clear())},noFill:function(){e.fill=null},fill:function(a,b,d,f){if(0==arguments.length)return e.fill;if(arguments.length>0){var g=Colors.decode(a,b,d,f);e.fill=g,c.fillStyle=Colors.encode(g)}},noStroke:function(){e.stroke=null,c.strokeStyle=null},stroke:function(a,b,d,f){if(0==arguments.length&&null!==e.stroke)return e.stroke;if(arguments.length>0){var g=Colors.decode(a,b,d,f);e.stroke=g,c.strokeStyle=Colors.encode(g)}},strokeWidth:function(a){return void 0===a?c.lineWidth:void(c.lineWidth=e.width=a)},Color:function(a){return new l(a)},drawStyle:function(a){if(0==arguments.length)return objcopy(e);if(2!=arguments.length)1==arguments.length&&void 0!==d[arguments[0]]&&(a=d[arguments[0]]),void 0!==a.width&&(e.width=a.width),c.lineWidth=e.width,$.each("background fill stroke",function(b,c){if(void 0!==a[c])if(null===a[c])e[c]=null;else{var d=Colors.decode(a[c]);d&&(e[c]=d)}}),c.fillStyle=e.fill,c.strokeStyle=e.stroke;else{var b=arguments[0],f=arguments[1];if("string"==typeof b&&"object"==typeof f){var g={};if(void 0!==f.color){var h=Colors.decode(f.color);h&&(g.color=h)}$.each("background fill stroke width".split(" "),function(a,b){void 0!==f[b]&&(g[b]=f[b])}),$.isEmptyObject(g)||(d[b]=g)}}},textStyle:function(a){if(0==arguments.length)return objcopy(g);if(2!=arguments.length){if(1==arguments.length&&void 0!==f[arguments[0]]&&(a=f[arguments[0]]),void 0!==a.font&&(g.font=a.font),void 0!==a.size&&(g.size=a.size),c.font=nano("{size}px {font}",g),void 0!==a.align&&(c.textAlign=g.align=a.align),void 0!==a.baseline&&(c.textBaseline=g.baseline=a.baseline),void 0!==a.alpha&&(g.alpha=a.alpha),void 0!==a.color){var b=Colors.decode(a.color);b&&(g.color=b)}if(g.color){var b=Colors.blend(g.color,g.alpha);b&&(c.fillStyle=b)}}else{var d=arguments[0],e=arguments[1];if("string"==typeof d&&"object"==typeof e){var h={};if(void 0!==e.color){var b=Colors.decode(e.color);b&&(h.color=b)}$.each("font size align baseline alpha".split(" "),function(a,b){void 0!==e[b]&&(h[b]=e[b])}),$.isEmptyObject(h)||(f[d]=h)}}},text:function(a,b,d,e){arguments.length>=3&&!isNaN(b)?(e=e||{},e.x=b,e.y=d):e=2==arguments.length&&"object"==typeof b?b:e||{};var f=objmerge(g,e);c.save(),void 0!==f.align&&(c.textAlign=f.align),void 0!==f.baseline&&(c.textBaseline=f.baseline),void 0===f.font||isNaN(f.size)||(c.font=nano("{size}px {font}",f));var h=void 0!==f.alpha?f.alpha:g.alpha,i=void 0!==f.color?f.color:g.color;c.fillStyle=Colors.blend(i,h),h>0&&c.fillText(a,Math.round(f.x),f.y),c.restore()},textWidth:function(a,b){b=objmerge(g,b||{}),c.save(),c.font=nano("{size}px {font}",b);var d=c.measureText(a).width;return c.restore(),d},Rect:function(a,b,c,d,e,f){return new k(a,b,c,d,e,f)},rect:function(a,b,c,d,e,f){k.prototype._draw(a,b,c,d,e,f)},Oval:function(a,b,c,d,e){return new j(a,b,c,d,e)},oval:function(a,b,c,d,e){e=e||{},j.prototype._draw(a,b,c,d,e)},line:function(a,b,c,d,e){var f=new m(a,b,c,d);f.draw(e)},lines:function(a,b,c,d){h.push("number"==typeof d?[{x:a,y:b},{x:c,y:d}]:[a,b])},drawLines:function(a){var b=new m(h);b.draw(a),h=[]}};return n.init()};arbor="undefined"!=typeof arbor?arbor:{},$.extend(arbor,{Graphics:function(a){return Graphics(a)},colors:{CSS:Colors.CSS,validate:Colors.validate,decode:Colors.decode,encode:Colors.encode,blend:Colors.blend}})})(this.jQuery)(function(){"use strict";angular.module("graphwikiApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("graphwikiApp").controller("MainCtrl",["$scope","$http","$q",function(a,b,c){var d,e;return a.wikiSearch="",a.searchSuggests=[],a.browseHistory=[],d=function(b){var c,d,e,f,g,h,i;return c=$(b).get(0),d=c.getContext("2d"),e=arbor.Graphics(c),h=null,i={init:function(a){h=a,h.screenSize(c.width,c.height),h.screenPadding(40),i.initMouseHandling()},redraw:function(){var a;h&&(e.clear(),a={},h.eachNode(function(b,c){var f,g;f=b.data.label||"",g=d.measureText(""+f).width+10,(""+f).match(/^[ \t]*$/)?f=null:(c.x=Math.floor(c.x),c.y=Math.floor(c.y)),d.fillStyle=b.data.color?b.data.color:"rgba(0,0,0,.2)","none"===b.data.color&&(d.fillStyle="white"),"dot"===b.data.shape?(e.oval(c.x-g/2,c.y-g/2,g,g,{fill:d.fillStyle}),a[b.name]=[c.x-g/2,c.y-g/2,g,g]):(e.rect(c.x-g/2,c.y-10,g,20,4,{fill:d.fillStyle}),a[b.name]=[c.x-g/2,c.y-11,g,22]),f&&(d.font="12px Helvetica",d.textAlign="center",d.fillStyle="white","none"===b.data.color&&(d.fillStyle="#333333"),d.fillText(f||"",c.x,c.y+4),d.fillText(f||"",c.x,c.y+4))}),h.eachEdge(function(b,c,e){var g,h,i,j,k,l,m;l=b.data.weight,i=b.data.color,(!i||(""+i).match(/^[ \t]*$/))&&(i=null),k=f(c,e,a[b.source.name]),j=f(k,e,a[b.target.name]),d.save(),d.beginPath(),d.lineWidth=isNaN(l)?1:parseFloat(l),d.strokeStyle=i?i:"#cccccc",d.fillStyle=null,d.moveTo(k.x,k.y),d.lineTo(j.x,j.y),d.stroke(),d.restore(),b.data.directed&&(d.save(),m=isNaN(l)?1:parseFloat(l),g=6+m,h=2+m,d.fillStyle=i?i:"#cccccc",d.translate(j.x,j.y),d.rotate(Math.atan2(j.y-k.y,j.x-k.x)),d.clearRect(-g/2,-m/2,g/2,m),d.beginPath(),d.moveTo(-g,h),d.lineTo(0,0),d.lineTo(-g,-h),d.lineTo(.8*-g,-0),d.closePath(),d.fill(),d.restore())}))},initMouseHandling:function(){var b,d,e,f,g,i;g=null,e=null,b=null,f=1,i=null,d={clicked:function(a){var f,j;return i=Date.now(),f=$(c).offset(),j=arbor.Point(a.pageX-f.left,a.pageY-f.top),g=e=b=h.nearest(j),null!==b.node&&(b.node.fixed=!0),$(c).bind("mousemove",d.dragged),$(window).bind("mouseup",d.dropped),!1},dragged:function(a){var d,f,g,i;return d=e&&e.node._id,g=$(c).offset(),i=arbor.Point(a.pageX-g.left,a.pageY-g.top),e?(null!==b&&null!==b.node&&(f=h.fromScreen(i),b.node.p=f),!1):void 0},dropped:function(){var e;if(null!==b&&void 0!==b.node)return null!==b.node&&(b.node.fixed=!1),b.node.tempMass=1e3,b=null,Date.now()-i<400&&"START"!==g.node.data.label&&(a.wikiSearch=g.node.data.label,a.searchWiki(!1)),g=null,i=null,$(c).unbind("mousemove",d.dragged),$(window).unbind("mouseup",d.dropped),e=null,!1}},$(c).mousedown(d.clicked)}},g=function(a,b,c,d){var e,f,g;return e=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y),0===e?!1:(f=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/e,g=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/e,0>f||f>1||0>g||g>1?!1:arbor.Point(a.x+f*(b.x-a.x),a.y+f*(b.y-a.y)))},f=function(a,b,c){var d,e,f,h,i,j,k;return h={x:c[0],y:c[1]},k=c[2],f=c[3],i={x:h.x,y:h.y},j={x:h.x+k,y:h.y},d={x:h.x,y:h.y+f},e={x:h.x+k,y:h.y+f},g(a,b,i,j)||g(a,b,j,e)||g(a,b,e,d)||g(a,b,d,i)||!1},i},e=arbor.ParticleSystem(1e3,600,.5),e.parameters({gravity:!0}),e.renderer=d("#viewport"),a.$watch("wikiSearch",function(){return b.jsonp("http://en.wikipedia.org/w/api.php?action=opensearch&search="+a.wikiSearch+"&limit=8&namespace=0&format=json&callback=JSON_CALLBACK").success(function(b){return a.searchSuggests=b[1]})}),a.searchWiki=function(d){var f;return null==d&&(d=!0),f=c.defer(),a.loading=!0,b.jsonp("http://en.wikipedia.org/w/api.php?action=parse&page="+a.wikiSearch+"&prop=text&format=json&callback=JSON_CALLBACK").success(function(b){var c,g;return a.wikiText=b.parse.text["*"],g=a.wikiSearch.replace(/[_ ]/g,"-"),d&&(c=e.addEdge(a.browseHistory.slice(-1)[0]||"start",g,{directed:!0,length:.2,color:"black"}),0===a.browseHistory.length&&(c.source.data.label="START"),c.target.data.label=a.wikiSearch,c.target.data.color="black"),a.browseHistory.push(g),f.resolve(b.parse.text["*"]),a.loading=!1}).error(function(){return f.reject("WIKIPEDIA FUCKED UP")}),f.promise}}])}.call(this);